# ERP项目 - 下一步开发任务

## 📋 项目状态总结

### ✅ 已完成
- **后端**: 所有Controller完整 (Auth, User, Role, Dept, Menu, Dict)
- **数据库**: 11张表完整设计并初始化
- **前端API层**: 完整的API接口封装 (auth, user, system/*)
- **用户管理页面**: 完整实现 (列表、表单、分配角色、分配部门、重置密码)
- **登录页面**: 完整实现
- **基础Dashboard**: 简单实现

### ❌ 待完成
- **系统管理页面**: 角色、部门、菜单管理页面为空
- **主布局**: 缺少完整的后台管理布局(侧边栏菜单、顶部导航等)
- **路由配置**: 缺少系统管理模块的路由配置
- **Dashboard**: 功能过于简单,需要完善

---

## 🎯 优先级任务清单

### 优先级 1: 主布局和路由 (必须先完成)
> 这是所有页面的基础,必须先实现

- [ ] **创建主布局组件** (`MainLayout.tsx`)
  - [ ] 侧边栏菜单 (Sider)
  - [ ] 顶部导航栏 (Header) - 用户信息、退出登录
  - [ ] 内容区域 (Content)
  - [ ] 面包屑导航
  
- [ ] **完善路由配置** (`router/index.tsx`)
  - [ ] 配置主布局路由
  - [ ] 配置系统管理子路由
    - [ ] /system/user - 用户管理
    - [ ] /system/role - 角色管理
    - [ ] /system/dept - 部门管理
    - [ ] /system/menu - 菜单管理
  - [ ] 配置路由守卫 (权限验证)

### 优先级 2: 角色管理页面
> 角色是权限管理的核心,优先实现

- [ ] **角色列表页面** (`pages/System/Role/index.tsx`)
  - [ ] 角色列表展示 (Table)
  - [ ] 搜索功能 (角色名称、角色编号)
  - [ ] 新增/编辑/删除操作
  - [ ] 分配权限功能 (菜单权限树)
  
- [ ] **角色表单组件** (`pages/System/Role/RoleForm.tsx`)
  - [ ] 角色基本信息 (编号、名称、权限字符串)
  - [ ] 数据权限范围选择
  - [ ] 状态选择
  - [ ] 表单验证

- [ ] **分配权限组件** (`pages/System/Role/AssignMenu.tsx`)
  - [ ] 菜单树形选择器
  - [ ] 权限分配保存

### 优先级 3: 部门管理页面
> 部门是组织架构的基础

- [ ] **部门列表页面** (`pages/System/Dept/index.tsx`)
  - [ ] 部门树形展示 (Tree Table)
  - [ ] 搜索功能 (部门名称、编号)
  - [ ] 新增/编辑/删除操作
  - [ ] 展开/折叠功能
  
- [ ] **部门表单组件** (`pages/System/Dept/DeptForm.tsx`)
  - [ ] 部门基本信息 (编号、名称、简称)
  - [ ] 上级部门选择 (树形选择器)
  - [ ] 负责人、联系方式
  - [ ] 排序、状态
  - [ ] 表单验证

### 优先级 4: 菜单管理页面
> 菜单管理用于配置系统权限

- [ ] **菜单列表页面** (`pages/System/Menu/index.tsx`)
  - [ ] 菜单树形展示 (Tree Table)
  - [ ] 搜索功能 (菜单名称、权限标识)
  - [ ] 新增/编辑/删除操作
  - [ ] 菜单类型标识 (目录/菜单/按钮)
  
- [ ] **菜单表单组件** (`pages/System/Menu/MenuForm.tsx`)
  - [ ] 菜单基本信息 (编号、名称、标题)
  - [ ] 菜单类型选择
  - [ ] 上级菜单选择 (树形选择器)
  - [ ] 路由配置 (路径、组件)
  - [ ] 权限标识、图标
  - [ ] 排序、显示状态
  - [ ] 表单验证

### 优先级 5: Dashboard完善
> 提升用户体验

- [ ] **Dashboard页面增强** (`pages/Dashboard/index.tsx`)
  - [ ] 数据统计卡片 (用户数、角色数、部门数等)
  - [ ] 最近操作日志
  - [ ] 快捷入口
  - [ ] 欢迎信息优化

---

## 📝 技术实现要点

### 1. 主布局设计
```
MainLayout
├── Sider (侧边栏)
│   ├── Logo
│   └── Menu (动态菜单)
├── Layout
    ├── Header (顶部栏)
    │   ├── Breadcrumb (面包屑)
    │   └── UserInfo (用户信息下拉菜单)
    └── Content (内容区)
        └── Outlet (子路由出口)
```

### 2. 路由结构
```
/
├── /login (登录页)
└── / (主布局)
    ├── /dashboard (仪表板)
    └── /system (系统管理)
        ├── /system/user (用户管理)
        ├── /system/role (角色管理)
        ├── /system/dept (部门管理)
        └── /system/menu (菜单管理)
```

### 3. 组件复用
- 树形选择器组件 (TreeSelect) - 用于部门、菜单的上级选择
- 权限树组件 (PermissionTree) - 用于角色分配权限
- 状态标签组件 (StatusTag) - 统一的状态显示

### 4. 数据字典集成
- 使用 `sys_dict_data` 表的数据
- 性别、状态、菜单类型、数据权限范围等下拉选项

---

## 🔍 验证计划

### 开发环境验证
1. **启动后端服务**
   ```bash
   cd erp-web
   mvn spring-boot:run
   ```

2. **启动前端服务**
   ```bash
   cd erp-adminPro
   npm run dev
   ```

3. **功能测试**
   - [ ] 登录功能正常
   - [ ] 主布局显示正常
   - [ ] 菜单导航正常
   - [ ] 各个管理页面可访问
   - [ ] CRUD操作正常
   - [ ] 权限分配功能正常

### 手动测试场景
1. **角色管理**
   - 创建新角色
   - 分配菜单权限
   - 编辑角色信息
   - 删除角色

2. **部门管理**
   - 创建顶级部门
   - 创建子部门
   - 编辑部门信息
   - 删除部门

3. **菜单管理**
   - 创建目录
   - 创建菜单
   - 创建按钮权限
   - 编辑菜单信息
   - 删除菜单

---

## 📅 建议开发顺序

1. **第一阶段** (1-2天): 主布局和路由
2. **第二阶段** (2-3天): 角色管理页面
3. **第三阶段** (2-3天): 部门管理页面
4. **第四阶段** (2-3天): 菜单管理页面
5. **第五阶段** (1天): Dashboard完善

**预计总工时**: 8-12天

---

## 💡 后续扩展方向

- [ ] 字典管理页面
- [ ] 操作日志查询页面
- [ ] 登录日志查询页面
- [ ] 用户个人中心
- [ ] 系统配置管理
- [ ] 数据导出功能
- [ ] 国际化支持
